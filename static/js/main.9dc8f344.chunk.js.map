{"version":3,"sources":["components/Ticket/Ticket.js","images/s7logo.png","components/Checkbox/Checkbox.js","images/Logo.svg","components/Preloader/Preloader.js","components/TicketsList/TicketList.js","utils/config.js","utils/MainApi.js","components/App/App.js","utils/constants.js","reportWebVitals.js","index.js"],"names":["Ticket","React","memo","props","getNumbersExtensions","n","titles","getTimeFromMinutes","minutes","getSumTravelTime","date","duration","timeStamp","Date","parse","newDate","newDuration","hoursAndMinutesDeparture","toLocaleString","hour","minute","hoursAndMinutesArrival","wordEndings","extensionMOW","segments","stops","length","extensionHKT","travelDurationTimeInMinutesMOW","travelDurationTimeInMinutesHKT","timeMOW","timeHKT","className","price","target","rel","href","src","alt","join","Checkbox","type","checked","isChecked","onChange","e","onFilterCheckboxClick","name","value","id","htmlFor","desc","Preloader","TicketList","errMessage","loading","checkboxes","tickets","count","onButtonSortClick","sortType","mainCheckbox","handleClick","title","Logo","map","checkbox","onClick","slice","ticket","i","mainApi","baseUrl","this","_baseUrl","fetch","method","headers","then","res","ok","json","Promise","reject","status","SearchId","App","useState","originTickets","setOriginTickets","setTickets","setCheckboxes","setMainCheckbox","setCount","setSortType","setErrMessage","setLoading","lazyLoadRef","useRef","priceSortFunc","a","b","durationSortFunc","optimalSortFunc","countStopsMOW","countStopsHKT","sortFunc","arr","func","sort","filterFunc","checkboxesArr","filteredArr","arg","item","push","filter","elem","includes","useEffect","getSearchId","getTickets","searchId","data","dataId","catch","finally","err","toString","IntersectionObserver","entries","observer","forEach","entry","isIntersecting","disconnect","rootMargin","observe","current","evt","newCheckboxesArr","ref","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9dc8f344.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Ticket.css';\r\nimport logo from '../../images/s7logo.png';\r\n\r\nconst Ticket = React.memo((props) => {\r\n  const getNumbersExtensions = (n, titles) => {\r\n    return titles[\r\n      (n % 10 === 1 && n % 100 !== 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2)\r\n      ];\r\n  };\r\n  const getTimeFromMinutes = (minutes) => `${((minutes) / 60) | 0}ч ${(minutes % 60) | 0}м`;\r\n  const getSumTravelTime = (date, duration) => {\r\n    const timeStamp = Date.parse(date);\r\n    const newDate = new Date(timeStamp);\r\n    const newDuration = new Date(timeStamp + duration * 60 * 1000);\r\n    const hoursAndMinutesDeparture = newDate.toLocaleString('default', { hour: 'numeric', minute: 'numeric' });\r\n    const hoursAndMinutesArrival = newDuration.toLocaleString('default', { hour: 'numeric', minute: 'numeric' });\r\n    return `${hoursAndMinutesDeparture} - ${hoursAndMinutesArrival}`\r\n  };\r\n  const wordEndings = ['- пересадка', '- пересадки', '- пересадок'];\r\n  const extensionMOW = (getNumbersExtensions(props.segments[0].stops.length, wordEndings));\r\n  const extensionHKT = (getNumbersExtensions(props.segments[1].stops.length, wordEndings));\r\n  const travelDurationTimeInMinutesMOW = getTimeFromMinutes(props.segments[0].duration);\r\n  const travelDurationTimeInMinutesHKT = getTimeFromMinutes(props.segments[1].duration);\r\n  const timeMOW = getSumTravelTime(props.segments[0].date, props.segments[0].duration);\r\n  const timeHKT = getSumTravelTime(props.segments[0].date, props.segments[1].duration);\r\n\r\n\r\n  return (\r\n    <article className=\"ticket\" >\r\n      <div className=\"ticket__header\">\r\n        <p className=\"ticket__price\">{props.price} P</p>\r\n        <a target='_blank' rel=\"noreferrer noopener\" href=\"https://www.s7.ru/\" className=\"ticket__link\">\r\n          <img src={logo} alt=\"S7 логотип\" className=\"ticket__logo\"/>\r\n        </a>\r\n      </div>\r\n      <div className=\"ticket__info-container\">\r\n        <div className=\"ticket__info\">\r\n          <p className=\"ticket__info-text\">MOW – HKT</p>\r\n          <p className=\"ticket__info-sub-text\">{timeHKT}</p>\r\n        </div>\r\n        <div className=\"ticket__info\">\r\n          <p className=\"ticket__info-text\">В пути</p>\r\n          <p className=\"ticket__info-sub-text ticket__info-sub-text_size_low\">{travelDurationTimeInMinutesHKT}</p>\r\n        </div>\r\n        <div className=\"ticket__info\">\r\n          <p className=\"ticket__info-text\">{`${props.segments[0].stops.length || 'без'} ${extensionMOW}`}</p>\r\n          <p className=\"ticket__info-sub-text\">{props.segments[0].stops.join(', ')}</p>\r\n        </div>\r\n        <div className=\"ticket__info\">\r\n          <p className=\"ticket__info-text\">MOW - HKT</p>\r\n          <p className=\"ticket__info-sub-text\">{timeMOW}</p>\r\n        </div>\r\n        <div className=\"ticket__info\">\r\n          <p className=\"ticket__info-text\">В пути</p>\r\n          <p className=\"ticket__info-sub-text ticket__info-sub-text_size_low\">{travelDurationTimeInMinutesMOW}</p>\r\n        </div>\r\n        <div className=\"ticket__info\">\r\n          <p className=\"ticket__info-text\">{`${props.segments[1].stops.length || 'без'} ${extensionHKT}`}</p>\r\n          <p className=\"ticket__info-sub-text\">{props.segments[1].stops.join(', ')}</p>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  )\r\n});\r\n\r\nexport default Ticket;\r\n","export default \"data:image/png;base64,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\"","import React from 'react';\r\nimport './Checkbox.css';\r\n\r\nconst Checkbox = React.memo((props) => {\r\n\r\n  function handleChange(e) {\r\n    props.onFilterCheckboxClick(e);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <input type=\"checkbox\"\r\n             className=\"checkbox\"\r\n             checked={props.isChecked}\r\n             onChange={handleChange}\r\n             name={props.name}\r\n             value={props.value}\r\n             id={props.id}/>\r\n      <label htmlFor={props.id} className=\"checkbox__label\">{props.desc}</label>\r\n    </>\r\n  )\r\n});\r\n\r\nexport default Checkbox;\r\n","export default __webpack_public_path__ + \"static/media/Logo.37640981.svg\";","import React from 'react';\r\nimport './Preloader.css';\r\n\r\nfunction Preloader() {\r\n\r\n  return (\r\n    <div className=\"preloader\">\r\n      <div className=\"preloader__img\"/>\r\n      <p className=\"preloader__text\">Идет поиск...</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Preloader;\r\n","import React from 'react';\r\nimport './TicketList.css';\r\nimport Ticket from '../../components/Ticket/Ticket';\r\nimport Checkbox from '../../components/Checkbox/Checkbox';\r\nimport Logo from '../../images/Logo.svg';\r\nimport {TICKETS_IN_A_ROW} from \"../../utils/config\";\r\nimport Preloader from '../../components/Preloader/Preloader';\r\n\r\nfunction TicketList(\r\n  { errMessage, loading, checkboxes, tickets, count, onButtonSortClick, sortType, onFilterCheckboxClick, mainCheckbox }) {\r\n\r\n  function handleClick(e) {\r\n    onButtonSortClick(e.target.value);\r\n  }\r\n\r\n  function handleChange(e) {\r\n    onFilterCheckboxClick(e);\r\n  }\r\n\r\n  return (\r\n    <section className='ticketList'>\r\n      <a target='_blank' rel=\"noreferrer noopener\" href=\"https://www.aviasales.ru/\" title=\"Aviasales\"\r\n         className=\"ticketList__link\">\r\n        <img src={Logo} alt=\"Логотип Авиасэйлс\" className=\"ticketList__logo\"/>\r\n      </a>\r\n      <div className=\"ticketList__filters\">\r\n        <h2 className=\"ticketList__filters-title\">Количество пересадок</h2>\r\n        <input type=\"checkbox\"\r\n               className=\"checkbox\"\r\n               checked={mainCheckbox}\r\n               onChange={handleChange}\r\n               name='all'\r\n               value='all'\r\n               id='all'/>\r\n        <label htmlFor='all' className=\"checkbox__label\">Все</label>\r\n        {checkboxes.map((checkbox) => (\r\n          <Checkbox key={checkbox.id} {...checkbox} onFilterCheckboxClick={onFilterCheckboxClick}/>))\r\n        }\r\n      </div>\r\n      <div className=\"ticketList__button-container\">\r\n        <button\r\n          className={`ticketList__button ${sortType === 'price' && 'ticketList__button_active'}`}\r\n          onClick={handleClick}\r\n          value={'price'}>Самый дешевый\r\n        </button>\r\n        <button\r\n          className={`ticketList__button ${sortType === 'duration' && 'ticketList__button_active'}`}\r\n          onClick={handleClick}\r\n          value={'duration'}>Самый быстрый\r\n        </button>\r\n        <button\r\n          className={`ticketList__button ${sortType === 'optimal' && 'ticketList__button_active'}`}\r\n          onClick={handleClick}\r\n          value={'optimal'}>Оптимальный\r\n        </button>\r\n      </div>\r\n      <div className=\"ticketList__container\">\r\n        {errMessage ? <p className=\"ticketList__error-message\">{errMessage}</p> :\r\n          <>\r\n        {loading ? <Preloader/> : tickets.slice(0, count + TICKETS_IN_A_ROW).map((ticket, i) => (\r\n          <Ticket key={ticket.id} {...ticket} />))\r\n        }\r\n        </>\r\n        }\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default TicketList;\r\n","const BASE_URL = 'https://front-test.beta.aviasales.ru';\r\nconst TICKETS_IN_A_ROW = 5;\r\n\r\nexport {\r\n  BASE_URL,\r\n  TICKETS_IN_A_ROW,\r\n};\r\n","import {BASE_URL} from \"./config\";\r\n\r\nclass MainApi {\r\n  constructor({ baseUrl }) {\r\n    this._baseUrl = baseUrl;\r\n  }\r\n\r\n  getSearchId() {\r\n    return fetch(`${this._baseUrl}/search`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json'\r\n      }\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(res.status);\r\n      })\r\n  }\r\n\r\n  getTickets(SearchId) {\r\n    return fetch(`${this._baseUrl}/tickets?searchId=${SearchId}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json'\r\n      }\r\n    })\r\n      .then((res) => {\r\n        if (res.status === 200) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject((res.json()));\r\n      })\r\n  }\r\n}\r\n\r\nconst mainApi = new MainApi({\r\n  baseUrl: BASE_URL,\r\n});\r\n\r\nexport default mainApi;\r\n","import React from 'react';\r\nimport './App.css';\r\nimport TicketList from '../../components/TicketsList/TicketList';\r\nimport data from '../../utils/data';\r\nimport mainApi from '../../utils/MainApi';\r\nimport {CONNECTION_REFUSED, SERVER_ERR, TOKEN_ERR} from \"../../utils/constants\";\r\n\r\nfunction App() {\r\n  const [originTickets, setOriginTickets] = React.useState([]);\r\n  const [tickets, setTickets] = React.useState([]);\r\n  const [checkboxes, setCheckboxes] = React.useState([\r\n    { id: 2, value: '0', isChecked: false, desc: 'Без пересадок' },\r\n    { id: 3, value: '1', isChecked: false, desc: '1 пересадка' },\r\n    { id: 4, value: '2', isChecked: false, desc: '2 пересадки' },\r\n    { id: 5, value: '3', isChecked: false, desc: '3 пересадки' }\r\n  ]);\r\n  const [mainCheckbox, setMainCheckbox] = React.useState(false);\r\n  const [count, setCount] = React.useState(0);\r\n  const [sortType, setSortType] = React.useState('price');\r\n  const [errMessage, setErrMessage] = React.useState('');\r\n  const [loading, setLoading] = React.useState('');\r\n  const lazyLoadRef = React.useRef();\r\n  const priceSortFunc = (a, b) => a.price - b.price;\r\n  const durationSortFunc = (a, b) => {\r\n    return (a.segments[0].duration + a.segments[1].duration) -\r\n      (b.segments[0].duration + b.segments[1].duration);\r\n  };\r\n  const optimalSortFunc = (a, b) => {\r\n    const countStopsMOW = a.segments[0].stops.length + a.segments[1].stops.length;\r\n    const countStopsHKT = b.segments[0].stops.length + b.segments[1].stops.length;\r\n    if (countStopsMOW === countStopsHKT) return a.price - b.price;\r\n    return countStopsMOW - countStopsHKT;\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    setLoading(true);\r\n    mainApi.getSearchId()\r\n      .then((res) => {\r\n        mainApi.getTickets(res.searchId)\r\n          .then((data) => {\r\n            let dataId = data.tickets.map((elem, i) => {\r\n              return { ...elem, id: i }\r\n            });\r\n            setOriginTickets(dataId);\r\n            setTickets(dataId.sort(priceSortFunc));\r\n          })\r\n          .catch(() => {\r\n            setErrMessage(SERVER_ERR);\r\n          })\r\n          .finally(() => setLoading(false));\r\n      })\r\n      .catch((err) => {\r\n        if (err.toString() === 'TypeError: Failed to fetch') {\r\n          setErrMessage(CONNECTION_REFUSED);\r\n        } else {\r\n          setErrMessage(TOKEN_ERR);\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    if (tickets.length > 0) {\r\n      let options = {\r\n        rootMargin: \"0px 0px 200px 0px\"\r\n      };\r\n\r\n      let callback = function (entries, observer) {\r\n        entries.forEach(entry => {\r\n          if (entry.isIntersecting) {\r\n            setCount(count + 5);\r\n            observer = observer.disconnect();\r\n          }\r\n        });\r\n      };\r\n\r\n      let observer = new IntersectionObserver(callback, options);\r\n      observer.observe(lazyLoadRef.current);\r\n    }\r\n  }, [count, tickets]);\r\n\r\n  function handleButtonSortClick(type) {\r\n    setTickets(sortFunc(tickets, type));\r\n    setSortType(type);\r\n  }\r\n\r\n  function sortFunc(arr, type) {\r\n    let func;\r\n    if (type === 'price') func = priceSortFunc;\r\n    if (type === 'duration') func = durationSortFunc;\r\n    if (type === 'optimal') func = optimalSortFunc;\r\n    return arr.sort(func);\r\n  }\r\n\r\n  function filterFunc(checkboxesArr) {\r\n    let arg = [];\r\n    for (let item of checkboxesArr) {\r\n      if (item.isChecked) {\r\n        arg.push(+item.value);\r\n      }\r\n    }\r\n    if (arg.length === checkboxes.length) setMainCheckbox(true);\r\n    if (arg.length > 0) {\r\n      let filteredArr;\r\n      filteredArr = originTickets.filter((elem) => {\r\n        return arg.includes((elem.segments[0].stops.length + elem.segments[1].stops.length));\r\n      });\r\n      setTickets(sortFunc(filteredArr, sortType));\r\n    } else {\r\n      setTickets(sortFunc(originTickets, sortType));\r\n    }\r\n  }\r\n\r\n  function handleCheckboxClick(evt) {\r\n    const target = evt.target;\r\n    if (target.id === 'all') {\r\n      setMainCheckbox(target.checked);\r\n      const newCheckboxesArr = checkboxes.map((elem) => ({ ...elem, isChecked: target.checked }));\r\n      setCheckboxes(newCheckboxesArr);\r\n      filterFunc(newCheckboxesArr);\r\n    } else {\r\n      if (!target.checked) setMainCheckbox(false);\r\n      const newCheckboxesArr = checkboxes.map((elem) => elem.id === +target.id ? {\r\n        ...elem,\r\n        isChecked: !elem.isChecked\r\n      } : elem);\r\n      setCheckboxes(newCheckboxesArr);\r\n      filterFunc(newCheckboxesArr);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <main className=\"content\">\r\n        <TicketList\r\n          tickets={tickets}\r\n          count={count}\r\n          onFilterCheckboxClick={handleCheckboxClick}\r\n          sortType={sortType}\r\n          onButtonSortClick={handleButtonSortClick}\r\n          checkboxes={checkboxes}\r\n          mainCheckbox={mainCheckbox}\r\n          loading={loading}\r\n          errMessage={errMessage}\r\n        />\r\n        <div className=\"lazy-load\" ref={lazyLoadRef}/>\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","const CONNECTION_REFUSED = 'Сервер не доступен';\r\nconst SERVER_ERR = 'Ошибка на сервере';\r\nconst TOKEN_ERR = 'Ошибка токена';\r\n\r\nexport {\r\n  CONNECTION_REFUSED,\r\n  SERVER_ERR,\r\n  TOKEN_ERR,\r\n};\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}