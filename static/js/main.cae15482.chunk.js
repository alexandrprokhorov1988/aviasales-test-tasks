(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),i=c(6),a=c.n(i),r=(c(14),c(7)),o=c(2),l=c(3),d=(c(15),c(16),c(17),c(0)),u=n.a.memo((function(e){var t=function(e,t){return t[e%10===1&&e%100!==11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2]},c=function(e){return"".concat(e/60|0,"\u0447 ").concat(e%60|0,"\u043c")},s=function(e,t){var c=Date.parse(e),s=new Date(c),n=new Date(c+60*t*1e3),i=s.toLocaleString("default",{hour:"numeric",minute:"numeric"}),a=n.toLocaleString("default",{hour:"numeric",minute:"numeric"});return"".concat(i," - ").concat(a)},n=["- \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430","- \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","- \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"],i=t(e.segments[0].stops.length,n),a=t(e.segments[1].stops.length,n),r=c(e.segments[0].duration),o=c(e.segments[1].duration),l=s(e.segments[0].date,e.segments[0].duration),u=s(e.segments[0].date,e.segments[1].duration);return Object(d.jsxs)("article",{className:"ticket",children:[Object(d.jsxs)("div",{className:"ticket__header",children:[Object(d.jsxs)("p",{className:"ticket__price",children:[e.price," P"]}),Object(d.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://www.s7.ru/",className:"ticket__link",children:Object(d.jsx)("img",{src:"data:image/png;base64,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",alt:"S7 \u043b\u043e\u0433\u043e\u0442\u0438\u043f",className:"ticket__logo"})})]}),Object(d.jsxs)("div",{className:"ticket__info-container",children:[Object(d.jsxs)("div",{className:"ticket__info",children:[Object(d.jsx)("p",{className:"ticket__info-text",children:"MOW \u2013 HKT"}),Object(d.jsx)("p",{className:"ticket__info-sub-text",children:u})]}),Object(d.jsxs)("div",{className:"ticket__info",children:[Object(d.jsx)("p",{className:"ticket__info-text",children:"\u0412 \u043f\u0443\u0442\u0438"}),Object(d.jsx)("p",{className:"ticket__info-sub-text ticket__info-sub-text_size_low",children:o})]}),Object(d.jsxs)("div",{className:"ticket__info",children:[Object(d.jsx)("p",{className:"ticket__info-text",children:"".concat(e.segments[0].stops.length||"\u0431\u0435\u0437"," ").concat(i)}),Object(d.jsx)("p",{className:"ticket__info-sub-text",children:e.segments[0].stops.join(", ")})]}),Object(d.jsxs)("div",{className:"ticket__info",children:[Object(d.jsx)("p",{className:"ticket__info-text",children:"MOW - HKT"}),Object(d.jsx)("p",{className:"ticket__info-sub-text",children:l})]}),Object(d.jsxs)("div",{className:"ticket__info",children:[Object(d.jsx)("p",{className:"ticket__info-text",children:"\u0412 \u043f\u0443\u0442\u0438"}),Object(d.jsx)("p",{className:"ticket__info-sub-text ticket__info-sub-text_size_low",children:r})]}),Object(d.jsxs)("div",{className:"ticket__info",children:[Object(d.jsx)("p",{className:"ticket__info-text",children:"".concat(e.segments[1].stops.length||"\u0431\u0435\u0437"," ").concat(a)}),Object(d.jsx)("p",{className:"ticket__info-sub-text",children:e.segments[1].stops.join(", ")})]})]})]})})),h=(c(19),n.a.memo((function(e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{type:"checkbox",className:"checkbox",checked:e.isChecked,onChange:function(t){e.onFilterCheckboxClick(t)},name:e.name,value:e.value,id:e.id}),Object(d.jsx)("label",{htmlFor:e.id,className:"checkbox__label",children:e.desc})]})}))),j=c.p+"static/media/Logo.37640981.svg";c(20);var b=function(){return Object(d.jsxs)("div",{className:"preloader",children:[Object(d.jsx)("div",{className:"preloader__img"}),Object(d.jsx)("p",{className:"preloader__text",children:"\u0418\u0434\u0435\u0442 \u043f\u043e\u0438\u0441\u043a..."})]})};var p=function(e){var t=e.errMessage,c=e.loading,s=e.checkboxes,n=e.tickets,i=e.count,a=e.onButtonSortClick,r=e.sortType,l=e.onFilterCheckboxClick,p=e.mainCheckbox;function m(e){a(e.target.value)}return Object(d.jsxs)("section",{className:"ticketList",children:[Object(d.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:"https://www.aviasales.ru/",title:"Aviasales",className:"ticketList__link",children:Object(d.jsx)("img",{src:j,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0410\u0432\u0438\u0430\u0441\u044d\u0439\u043b\u0441",className:"ticketList__logo"})}),Object(d.jsxs)("div",{className:"ticketList__filters",children:[Object(d.jsx)("h2",{className:"ticketList__filters-title",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}),Object(d.jsx)("input",{type:"checkbox",className:"checkbox",checked:p,onChange:function(e){l(e)},name:"all",value:"all",id:"all"}),Object(d.jsx)("label",{htmlFor:"all",className:"checkbox__label",children:"\u0412\u0441\u0435"}),s.map((function(e){return Object(d.jsx)(h,Object(o.a)(Object(o.a)({},e),{},{onFilterCheckboxClick:l}),e.id)}))]}),Object(d.jsxs)("div",{className:"ticketList__button-container",children:[Object(d.jsx)("button",{className:"ticketList__button ".concat("price"===r&&"ticketList__button_active"),onClick:m,value:"price",children:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"}),Object(d.jsx)("button",{className:"ticketList__button ".concat("duration"===r&&"ticketList__button_active"),onClick:m,value:"duration",children:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"}),Object(d.jsx)("button",{className:"ticketList__button ".concat("optimal"===r&&"ticketList__button_active"),onClick:m,value:"optimal",children:"\u041e\u043f\u0442\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439"})]}),Object(d.jsx)("div",{className:"ticketList__container",children:t?Object(d.jsx)("p",{className:"ticketList__error-message",children:t}):Object(d.jsx)(d.Fragment,{children:c?Object(d.jsx)(b,{}):n.slice(0,i+5).map((function(e,t){return Object(d.jsx)(u,Object(o.a)({},e),e.id)}))})})]})},m=c(8),k=c(9),f=new(function(){function e(t){var c=t.baseUrl;Object(m.a)(this,e),this._baseUrl=c}return Object(k.a)(e,[{key:"getSearchId",value:function(){return fetch("".concat(this._baseUrl,"/search"),{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject(e.status)}))}},{key:"getTickets",value:function(e){return fetch("".concat(this._baseUrl,"/tickets?searchId=").concat(e),{method:"GET",headers:{Accept:"application/json"}}).then((function(e){return 200===e.status?e.json():Promise.reject(e.json())}))}}]),e}())({baseUrl:"https://front-test.beta.aviasales.ru"});var x=function(){var e=n.a.useState([]),t=Object(l.a)(e,2),c=t[0],s=t[1],i=n.a.useState([]),a=Object(l.a)(i,2),u=a[0],h=a[1],j=n.a.useState([{id:2,value:"0",isChecked:!1,desc:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"},{id:3,value:"1",isChecked:!1,desc:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"},{id:4,value:"2",isChecked:!1,desc:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},{id:5,value:"3",isChecked:!1,desc:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"}]),b=Object(l.a)(j,2),m=b[0],k=b[1],x=n.a.useState(!1),O=Object(l.a)(x,2),g=O[0],y=O[1],_=n.a.useState(0),v=Object(l.a)(_,2),A=v[0],N=v[1],z=n.a.useState("price"),L=Object(l.a)(z,2),J=L[0],K=L[1],w=n.a.useState(""),B=Object(l.a)(w,2),C=B[0],S=B[1],I=n.a.useState(""),T=Object(l.a)(I,2),E=T[0],M=T[1],q=n.a.useRef(),P=function(e,t){return e.price-t.price},F=function(e,t){return e.segments[0].duration+e.segments[1].duration-(t.segments[0].duration+t.segments[1].duration)},G=function(e,t){var c=e.segments[0].stops.length+e.segments[1].stops.length,s=t.segments[0].stops.length+t.segments[1].stops.length;return c===s?e.price-t.price:c-s};function V(e,t){var c;return"price"===t&&(c=P),"duration"===t&&(c=F),"optimal"===t&&(c=G),e.sort(c)}function D(e){var t,s,n=[],i=Object(r.a)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.isChecked&&n.push(+a.value)}}catch(o){i.e(o)}finally{i.f()}(n.length===m.length&&y(!0),n.length>0)?(s=c.filter((function(e){return n.includes(e.segments[0].stops.length+e.segments[1].stops.length)})),h(V(s,J))):h(V(c,J))}return n.a.useEffect((function(){M(!0),f.getSearchId().then((function(e){f.getTickets(e.searchId).then((function(e){var t=e.tickets.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{id:t})}));s(t),h(t.sort(P))})).catch((function(){S("\u041e\u0448\u0438\u0431\u043a\u0430 \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435")})).finally((function(){return M(!1)}))})).catch((function(e){"TypeError: Failed to fetch"===e.toString()?S("\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d"):S("\u041e\u0448\u0438\u0431\u043a\u0430 \u0442\u043e\u043a\u0435\u043d\u0430")}))}),[]),n.a.useEffect((function(){if(u.length>0){new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&(N(A+5),t=t.disconnect())}))}),{rootMargin:"0px 0px 200px 0px"}).observe(q.current)}}),[A,u]),Object(d.jsx)("div",{className:"page",children:Object(d.jsxs)("main",{className:"content",children:[Object(d.jsx)(p,{tickets:u,count:A,onFilterCheckboxClick:function(e){var t=e.target;if("all"===t.id){y(t.checked);var c=m.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{isChecked:t.checked})}));k(c),D(c)}else{t.checked||y(!1);var s=m.map((function(e){return e.id===+t.id?Object(o.a)(Object(o.a)({},e),{},{isChecked:!e.isChecked}):e}));k(s),D(s)}},sortType:J,onButtonSortClick:function(e){h(V(u,e)),K(e)},checkboxes:m,mainCheckbox:g,loading:E,errMessage:C}),Object(d.jsx)("div",{className:"lazy-load",ref:q})]})})},O=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,22)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,a=t.getTTFB;c(e),s(e),n(e),i(e),a(e)}))};a.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(x,{})}),document.getElementById("root")),O()}],[[21,1,2]]]);
//# sourceMappingURL=main.cae15482.chunk.js.map